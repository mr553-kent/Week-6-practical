% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={week6 hip replacement},
  pdfauthor={Melanie Rees-Roberts},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{week6 hip replacement}
\author{Melanie Rees-Roberts}
\date{2024-11-07}

\begin{document}
\maketitle

\subsection{Week 6 practical: Hip replacement data
work}\label{week-6-practical-hip-replacement-data-work}

\#This is work to complete the Hip replacement data practical work for
IntroHDS \#course, week 6. \#The following questions require answering
to complete the practical:

\#1. Plot `EQ-5D Index' scores pre and post operation for each gender

\#2. Calculate how many patients in this dataset have been told by a
doctor that \#they have problems caused by a stroke

\#3. Create a clean and tidy table with pre and post operation activity
levels

\subsection{Libraries and packages
needed}\label{libraries-and-packages-needed}

\#For this work we require the following packages; tidyverse

\#From this package we will use the following libraries

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(readr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'readr' was built under R version 4.3.3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'tidyr' was built under R version 4.3.3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'dplyr' was built under R version 4.3.3
\end{verbatim}

\begin{verbatim}
## 
## Attaching package: 'dplyr'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:stats':
## 
##     filter, lag
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(here)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'here' was built under R version 4.3.3
\end{verbatim}

\begin{verbatim}
## here() starts at C:/Users/mr553/OneDrive - University of Kent/Documents/GitHUB/Week 6 practical/week6 hip replacement
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'ggplot2' was built under R version 4.3.3
\end{verbatim}

\subsection{Import the data}\label{import-the-data}

\#Data file provided called Hip replacement CCG 1819. Import the data
with \#read\_csv command

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hip }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"Hip Replacement CCG 1819.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 28920 Columns: 81
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr  (5): Provider Code, Procedure, Year, Age Band, Gender
## dbl (76): Revision Flag, Pre-Op Q Assisted, Pre-Op Q Assisted By, Pre-Op Q S...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\subsection{Understand, select and tidy the
data}\label{understand-select-and-tidy-the-data}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(hip)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 81
##   `Provider Code` Procedure       `Revision Flag` Year    `Age Band` Gender
##   <chr>           <chr>                     <dbl> <chr>   <chr>      <chr> 
## 1 00C             Hip Replacement               0 2018/19 *          *     
## 2 00C             Hip Replacement               0 2018/19 *          *     
## 3 00C             Hip Replacement               1 2018/19 *          *     
## 4 00C             Hip Replacement               1 2018/19 *          *     
## 5 00C             Hip Replacement               0 2018/19 *          *     
## 6 00C             Hip Replacement               0 2018/19 *          *     
## # i 75 more variables: `Pre-Op Q Assisted` <dbl>, `Pre-Op Q Assisted By` <dbl>,
## #   `Pre-Op Q Symptom Period` <dbl>, `Pre-Op Q Previous Surgery` <dbl>,
## #   `Pre-Op Q Living Arrangements` <dbl>, `Pre-Op Q Disability` <dbl>,
## #   `Heart Disease` <dbl>, `High Bp` <dbl>, Stroke <dbl>, Circulation <dbl>,
## #   `Lung Disease` <dbl>, Diabetes <dbl>, `Kidney Disease` <dbl>,
## #   `Nervous System` <dbl>, `Liver Disease` <dbl>, Cancer <dbl>,
## #   Depression <dbl>, Arthritis <dbl>, `Pre-Op Q Mobility` <dbl>, ...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{colnames}\NormalTok{(hip)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Provider Code"                                 
##  [2] "Procedure"                                     
##  [3] "Revision Flag"                                 
##  [4] "Year"                                          
##  [5] "Age Band"                                      
##  [6] "Gender"                                        
##  [7] "Pre-Op Q Assisted"                             
##  [8] "Pre-Op Q Assisted By"                          
##  [9] "Pre-Op Q Symptom Period"                       
## [10] "Pre-Op Q Previous Surgery"                     
## [11] "Pre-Op Q Living Arrangements"                  
## [12] "Pre-Op Q Disability"                           
## [13] "Heart Disease"                                 
## [14] "High Bp"                                       
## [15] "Stroke"                                        
## [16] "Circulation"                                   
## [17] "Lung Disease"                                  
## [18] "Diabetes"                                      
## [19] "Kidney Disease"                                
## [20] "Nervous System"                                
## [21] "Liver Disease"                                 
## [22] "Cancer"                                        
## [23] "Depression"                                    
## [24] "Arthritis"                                     
## [25] "Pre-Op Q Mobility"                             
## [26] "Pre-Op Q Self-Care"                            
## [27] "Pre-Op Q Activity"                             
## [28] "Pre-Op Q Discomfort"                           
## [29] "Pre-Op Q Anxiety"                              
## [30] "Pre-Op Q EQ5D Index Profile"                   
## [31] "Pre-Op Q EQ5D Index"                           
## [32] "Post-Op Q Assisted"                            
## [33] "Post-Op Q Assisted By"                         
## [34] "Post-Op Q Living Arrangements"                 
## [35] "Post-Op Q Disability"                          
## [36] "Post-Op Q Mobility"                            
## [37] "Post-Op Q Self-Care"                           
## [38] "Post-Op Q Activity"                            
## [39] "Post-Op Q Discomfort"                          
## [40] "Post-Op Q Anxiety"                             
## [41] "Post-Op Q Satisfaction"                        
## [42] "Post-Op Q Sucess"                              
## [43] "Post-Op Q Allergy"                             
## [44] "Post-Op Q Bleeding"                            
## [45] "Post-Op Q Wound"                               
## [46] "Post-Op Q Urine"                               
## [47] "Post-Op Q Further Surgery"                     
## [48] "Post-Op Q Readmitted"                          
## [49] "Post-Op Q EQ5D Index Profile"                  
## [50] "Post-Op Q EQ5D Index"                          
## [51] "Hip Replacement EQ5D Index Post-Op Q Predicted"
## [52] "Pre-Op Q EQ VAS"                               
## [53] "Post-Op Q EQ VAS"                              
## [54] "Hip Replacement EQ VAS Post-Op Q Predicted"    
## [55] "Hip Replacement Pre-Op Q Pain"                 
## [56] "Hip Replacement Pre-Op Q Sudden Pain"          
## [57] "Hip Replacement Pre-Op Q Night Pain"           
## [58] "Hip Replacement Pre-Op Q Washing"              
## [59] "Hip Replacement Pre-Op Q Transport"            
## [60] "Hip Replacement Pre-Op Q Dressing"             
## [61] "Hip Replacement Pre-Op Q Shopping"             
## [62] "Hip Replacement Pre-Op Q Walking"              
## [63] "Hip Replacement Pre-Op Q Limping"              
## [64] "Hip Replacement Pre-Op Q Stairs"               
## [65] "Hip Replacement Pre-Op Q Standing"             
## [66] "Hip Replacement Pre-Op Q Work"                 
## [67] "Hip Replacement Pre-Op Q Score"                
## [68] "Hip Replacement Post-Op Q Pain"                
## [69] "Hip Replacement Post-Op Q Sudden Pain"         
## [70] "Hip Replacement Post-Op Q Night Pain"          
## [71] "Hip Replacement Post-Op Q Washing"             
## [72] "Hip Replacement Post-Op Q Transport"           
## [73] "Hip Replacement Post-Op Q Dressing"            
## [74] "Hip Replacement Post-Op Q Shopping"            
## [75] "Hip Replacement Post-Op Q Walking"             
## [76] "Hip Replacement Post-Op Q Limping"             
## [77] "Hip Replacement Post-Op Q Stairs"              
## [78] "Hip Replacement Post-Op Q Standing"            
## [79] "Hip Replacement Post-Op Q Work"                
## [80] "Hip Replacement Post-Op Q Score"               
## [81] "Hip Replacement OHS Post-Op Q Predicted"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#Check this is for a single year {-} then dont need the year variable}
\NormalTok{hip }\SpecialCharTok{\%\textgreater{}\%} 
\FunctionTok{count}\NormalTok{(Year)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 1 x 2
##   Year        n
##   <chr>   <int>
## 1 2018/19 28920
\end{verbatim}

\#For this exercise, we need the following data variables: \#Gender,
Strike, Pre-OP Q EQ5D Index, Post-Op Q EQ5D Index, Pre-Op Q Activity,
Post-Op Q Activity \#Create tibble with required variables, shortening
the variable names where appropriate

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hip2 }\OtherTok{\textless{}{-}}\NormalTok{ hip }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(}\StringTok{\textquotesingle{}Gender\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}Pre{-}Op Q EQ5D Index\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}Post{-}Op Q EQ5D Index\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}Stroke\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}Pre{-}Op Q Activity\textquotesingle{}}\NormalTok{,}\StringTok{\textquotesingle{}Post{-}Op Q Activity\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{rename}\NormalTok{(}\AttributeTok{EQ5D\_pre =} \StringTok{\textquotesingle{}Pre{-}Op Q EQ5D Index\textquotesingle{}}\NormalTok{,}
         \AttributeTok{EQ5D\_post =} \StringTok{\textquotesingle{}Post{-}Op Q EQ5D Index\textquotesingle{}}\NormalTok{,}
         \AttributeTok{activity\_pre =} \StringTok{\textquotesingle{}Pre{-}Op Q Activity\textquotesingle{}}\NormalTok{,}
         \AttributeTok{activity\_post =} \StringTok{\textquotesingle{}Post{-}Op Q Activity\textquotesingle{}}\NormalTok{)}

\FunctionTok{head}\NormalTok{(hip2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 6
##   Gender EQ5D_pre EQ5D_post Stroke activity_pre activity_post
##   <chr>     <dbl>     <dbl>  <dbl>        <dbl>         <dbl>
## 1 *        NA         0.516      9            9             2
## 2 *        -0.003    NA          9            3             9
## 3 *        NA        -0.074      9            9             3
## 4 *         0.03      0.796      9            3             1
## 5 *        -0.239     0.62       9            3             2
## 6 *         0.159     0.691      9            2             2
\end{verbatim}

\#Remove missing values - create this into new data frame hip3

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hip2}\SpecialCharTok{$}\NormalTok{Gender }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{table}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## .
##     *     1     2 
##  2309 10255 16356
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hip3 }\OtherTok{\textless{}{-}}\NormalTok{ hip2 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{drop\_na}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(Gender }\SpecialCharTok{!=}\StringTok{\textquotesingle{}*\textquotesingle{}}\NormalTok{)}

\FunctionTok{head}\NormalTok{(hip3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 6
##   Gender EQ5D_pre EQ5D_post Stroke activity_pre activity_post
##   <chr>     <dbl>     <dbl>  <dbl>        <dbl>         <dbl>
## 1 1        -0.016     0.516      9            2             2
## 2 1         0.159     0.743      9            2             2
## 3 1         0.03      0.727      9            3             1
## 4 1         0.587     0.85       9            2             1
## 5 1         0.623     0.796      9            1             1
## 6 1         0.691     1          9            2             1
\end{verbatim}

\#\#Tidy the data - move pre and post into a time variable and th EQ5D
and Activity into variables \#Saved into a new dataset tidy\_hip

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tidy\_hip }\OtherTok{\textless{}{-}}\NormalTok{ hip3 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{pivot\_longer}\NormalTok{(}\FunctionTok{c}\NormalTok{(EQ5D\_pre,EQ5D\_post),}
               \AttributeTok{names\_to =} \StringTok{\textquotesingle{}Time\_EQ5D\textquotesingle{}}\NormalTok{,}
               \AttributeTok{names\_prefix =} \StringTok{\textquotesingle{}EQ5D\_\textquotesingle{}}\NormalTok{,}
               \AttributeTok{values\_to =} \StringTok{\textquotesingle{}EQ5D\textquotesingle{}}\NormalTok{)}


\NormalTok{tidy\_hip }\OtherTok{\textless{}{-}}\NormalTok{ tidy\_hip }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{pivot\_longer}\NormalTok{(}\FunctionTok{c}\NormalTok{(activity\_pre, activity\_post),}
               \AttributeTok{names\_to =} \StringTok{\textquotesingle{}Time\_activity\textquotesingle{}}\NormalTok{,}
               \AttributeTok{names\_prefix =} \StringTok{\textquotesingle{}activity\_\textquotesingle{}}\NormalTok{,}
               \AttributeTok{values\_to =} \StringTok{\textquotesingle{}activity\textquotesingle{}}\NormalTok{)}


\FunctionTok{head}\NormalTok{(tidy\_hip)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 6
##   Gender Stroke Time_EQ5D   EQ5D Time_activity activity
##   <chr>   <dbl> <chr>      <dbl> <chr>            <dbl>
## 1 1           9 pre       -0.016 pre                  2
## 2 1           9 pre       -0.016 post                 2
## 3 1           9 post       0.516 pre                  2
## 4 1           9 post       0.516 post                 2
## 5 1           9 pre        0.159 pre                  2
## 6 1           9 pre        0.159 post                 2
\end{verbatim}

\#\#Answer the questions

\#\#1. Plot `EQ-5D Index' scores pre and post operation for each gender

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#From tidy\_hip we can now select the data and plot the scores}

\NormalTok{tidy\_hip\_plot }\OtherTok{\textless{}{-}}\NormalTok{ tidy\_hip }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(EQ5D, Time\_EQ5D,Gender}
\NormalTok{         )}

\FunctionTok{head}\NormalTok{(tidy\_hip\_plot)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 3
##     EQ5D Time_EQ5D Gender
##    <dbl> <chr>     <chr> 
## 1 -0.016 pre       1     
## 2 -0.016 pre       1     
## 3  0.516 post      1     
## 4  0.516 post      1     
## 5  0.159 pre       1     
## 6  0.159 pre       1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#Now plot the data pre and post for each gender}

\NormalTok{tidy\_hip\_plot }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{geom\_boxplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x=}\NormalTok{Time\_EQ5D, }\AttributeTok{y=}\NormalTok{ EQ5D, }\AttributeTok{colour =}\NormalTok{ Gender))}
\end{Highlighting}
\end{Shaded}

\includegraphics{Week-6-Hip-replacement_files/figure-latex/unnamed-chunk-6-1.pdf}

\#\#2. Calculate how many patients in this dataset have been told by a
doctor that \#they have problems caused by a stroke

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#We need to return to our table where we did not make the data tidy {-} this may cause duplication of Stroke data}
\CommentTok{\#calculate the how many patients have been told they have problems caused by stroke}

\NormalTok{hip2}\SpecialCharTok{$}\NormalTok{Stroke }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{table}\NormalTok{() }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## .
##     1     9 
##   400 28520
\end{verbatim}

\section{A total of 400 patients in this dataset have been told that
they have problems caused by
stroke.}\label{a-total-of-400-patients-in-this-dataset-have-been-told-that-they-have-problems-caused-by-stroke.}

\#\#3. Create a clean and tidy table with pre and post operation
activity levels \#We converted the pre- and post- activity levels
earlier in the file - see code above. However, to show just these
variables

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(tidy\_hip)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 6
##   Gender Stroke Time_EQ5D   EQ5D Time_activity activity
##   <chr>   <dbl> <chr>      <dbl> <chr>            <dbl>
## 1 1           9 pre       -0.016 pre                  2
## 2 1           9 pre       -0.016 post                 2
## 3 1           9 post       0.516 pre                  2
## 4 1           9 post       0.516 post                 2
## 5 1           9 pre        0.159 pre                  2
## 6 1           9 pre        0.159 post                 2
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tidy\_hip\_activity }\OtherTok{\textless{}{-}}\NormalTok{ tidy\_hip }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(Time\_activity,activity) }

\FunctionTok{head}\NormalTok{(tidy\_hip\_activity)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 2
##   Time_activity activity
##   <chr>            <dbl>
## 1 pre                  2
## 2 post                 2
## 3 pre                  2
## 4 post                 2
## 5 pre                  2
## 6 post                 2
\end{verbatim}

\end{document}
